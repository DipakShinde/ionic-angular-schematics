# <%= utils.classify(name) %>

## Table of Contents
- [Introduction](#introduction)
    - [License](#license)
    - [Features](#features)
    - [Quick Start](#quick-start)    
    - [Task Automation](#task-automation)
        - [Default Tasks](#default-tasks)
- [Build Management](#build-management) 
    - [Aliases and Environment-specific Variables](#aliases-and-environment-specific-variables)
- [Logging](#logging)    
- [Theming](#theming)    
- [Resources](#resources)

#### Prerequisites
- Node.js (which includes npm, the Node Package Manager)
- Git

## Introduction

This project was generated by the [Angular CLI](https://github.com/angular/angular-cli) version 1.6.3 using 
@ionic-angular/schematics version 1.0.2

### License

This work is licensed under the MIT License.

### Features
- Ionic 3
- Angular 5
- Environment specific variable support
- Angular-style Unit Testing and End-to-End Testing
- Simple Logging Service
- Dynamic Theme Support

### Quick Start

```
# Install Ionic globally using npm
npm install -g ionic@latest

# Install Cordova globally using npm
npm install -g cordova@latest

# Change directory
cd my-app

# Launch the project
npm run ios:dev
```

### Task Automation

Task automation is based on [Ionic App Scripts](https://github.com/ionic-team/ionic-app-scripts) executed from npm scripts. 
Scripts are configured in the project's `package.json` file. For example:

```
  "scripts": {
    ...
    "dev": "ionic-app-scripts serve",
    "ios:dev": "ionic-app-scripts serve --platform=ios",
    "build": "ionic-app-scripts build",
    "ios:build": "ionic-app-scripts build --platform=ios",
    ... 
  }
```

#### Default Tasks

 Task           | Description
----------------|---------------------------------------------------------------------------------------
 `clean`        | Empty the project's `www/build` directory.
 `lint`         | Run the linter against the project's `.ts` files, using the `tslint.json` config file located in the project's root directory.
 `dev`          | Run the dev server for the Android platform and launch the default browser.
 `ios:dev`      | Short cut for `npm run dev --platform=ios`
 `build`        | Create a complete build of the application. Uses the development settings by default. Use the `--prod` command-line flag to create an optimised build.
 `ios:build`    | Short cut for `npm run build --platform=ios`

To run the `build` script found in the `package.json` 'scripts' property, execute:

    npm run build

#### Command-line Flags

Command-line flags can be also applied to `npm run` commands:

    npm run ios:build --prod

To serve your `--prod` build:

    cd www
    python -m SimpleHTTPServer 8080

Navigate to:

    http://localhost:8080

## Build Management

### Aliases and Environment-specific Variables

Steps to add support for aliases and environment-specific variables.

Update `compilerOptions` in `tsconfig.json`:
```json
  "compilerOptions": {
  
    ...
    
    "target": "es5",
    "typeRoots": [
      "../node_modules/@types"
    ],
    "baseUrl": "./src",
    "paths": {
      "@app/*": [ "app/*" ],
      "@assets/*": [ "assets/*" ],
      "@core/*": [ "app/core/*" ],
      "@env": [ "environments/environment" ],
      "@pages/*": [ "app/pages/*" ],
      "@shared/*": [ "app/shared/*" ],
      "@tests/*": [ "./*" ],
      "@theme/*": [ "theme/*" ]
    }
  }
  
  ...
```

Created `config/webpack.config.js`:
```javascript
const chalk = require("chalk");
const fs = require('fs');
const path = require('path');
const useDefaultConfig = require('@ionic/app-scripts/config/webpack.config.js');

const env = process.env.IONIC_ENV;

if (env === 'prod' || env === 'dev') {

  useDefaultConfig[env].resolve.alias = {
    "@app": path.resolve('./src/app/'),
    "@assets": path.resolve('./src/assets/'),
    "@core": path.resolve('./src/app/core/'),
    "@env": path.resolve(environmentPath()),
    "@pages": path.resolve('./src/app/pages/'),
    "@shared": path.resolve('./src/app/shared/'),
    "@tests": path.resolve('./src/'),
    "@theme": path.resolve('./src/theme/')
  };

} else {

  // Default to dev config
  useDefaultConfig[env] = useDefaultConfig.dev;
  useDefaultConfig[env].resolve.alias = {
    "@app": path.resolve('./src/app/'),
    "@assets": path.resolve('./src/assets/'),
    "@core": path.resolve('./src/app/core/'),
    "@env": path.resolve(environmentPath()),
    "@pages": path.resolve('./src/app/pages/'),
    "@shared": path.resolve('./src/app/shared/'),
    "@tests": path.resolve('./src/'),
    "@theme": path.resolve('./src/theme/')
  };

}

function environmentPath() {

  let filePath = './src/environments/environment' + (env === 'prod' ? '' : '.' + env) + '.ts';

  if (!fs.existsSync(filePath)) {
    console.log(chalk.red('\n' + filePath + ' does not exist!'));
  } else {
    return filePath;
  }
}

module.exports = function () {
  return useDefaultConfig;
};
```

Created `src/environments/env.ts`:
```typescript
export interface EnvInterface {
  
  production: boolean;
  isDebugMode: boolean;
  
}
```

Created `src/environments/environment.ts` that will be used for the **Production** environment:
```typescript
import { EnvInterface } from './env';

export const ENV: EnvInterface = {

  production: true,
  isDebugMode: false

};
```

Created `src/environments/environment.dev.ts` that will be used for the **Development** environment:
```typescript
import { EnvInterface } from './env';

export const ENV: EnvInterface = {

  production: false,
  isDebugMode: true

};
```

Update `package.json`:
```json
"config": {
  "ionic_source_map_type": "source-map",
  "ionic_webpack": "./config/webpack.config.js"
}
```

Import your environment variables:
```typescript
import { ENV } from '@env'
```
**Note:** Remember to ignore your environment files in your `.gitignore`
```
# Environment Variables
**/environment.*
!**/environment.model.ts
```

##### References:

* [Easy to use environment variables for Ionic 3](https://github.com/gshigeto/ionic-environment-variables)
* [Ionic CLI - Issue 1205 - Environment variable configuration](https://github.com/ionic-team/ionic-cli/issues/1205)
